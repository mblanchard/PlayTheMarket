<html>
	<head>
		<script src="js/vendor/papaparse.min.js"></script>
		<script src="js/vendor/qwerty-hancock.js"></script>	
	</head>
	<body>
		<div id="keyboard"></div>
		
		

		<script src="js/shims.js"></script>
		<script src="js/parsing.js"></script>
		<script src="js/audio.js"></script>
		<script src="js/waveShaping.js"></script>	
		<script src="js/keyboard.js"></script>		
		<script type="text/javascript">
			window.debug_flag = true;
			
			var context = PTM.Audio.initContext();
            var compressor = PTM.Audio.createCompressor(context);
			var gain = PTM.Audio.createGain(context, 0.3);
			var keyboard = new PTM.CreateKeyboard('keyboard');
			var distortion = null;

			compressor.connect(gain); 
            gain.connect(context.destination); 
 			
			parsing.parseStockData("D","2012-03-30","2015-07-30", 
				function(results) {
					var leveledArray = PTM.WaveShaping.transformQuandlStockData(results.data);
					distortion = PTM.WaveShaping.createWaveShaperFromArray(leveledArray,1,context);
					distortion.connect(compressor);
					keyboard.bindToAudioDestination(distortion);
				}
			);				
		</script>
		
	</body>
</html>
	